<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Community Engagement</title>
    <link rel="stylesheet" href="./styles/site.css" />
  </head>
  <body class="page page--community">
    <modular-menu
      data-links='[
        {"label":"Home","href":"./index.html"},
        {"label":"About Us","href":"./aboutus.html"},
        {"label":"Resources","href":./resources.html"},
        {"label":"Contact","href":"./contact.html"},
        {"label":"Community Engagement","href":"./community.html"},
        {"label":"Donate","href":"./donate.html"},
        {"label":"Merch Store","href":"./shop.html"}
      ]'
    ></modular-menu>

    <main class="text-center">
      <h1>Community Engagement</h1>
      <p>
        TMH as a community serves to deliver on the mission statement of community
        and service as our core values. We want to deliver the best we can for our
        members; because they are the best
      </p>
      <p>
        We get involved with the community in multiple ways, see how in our keystones below.
      </p>
    </main>

    <section class="card">
      <h2 class="text-center">Resource Library</h2>
      <p>
        Volunteers maintain a living library of guides, vetted service
        providers, RLE testimonies and support.
      </p>
      <div class="resource-grid">
        <article class="resource-card">
          <h3>Transition &amp; Support</h3>
          <p>
            Step-by-step checklists, safe guarded resources and support
            navigating either those actively serving, transitioning out of service or those who have served.
          </p>
        </article>
        <article class="resource-card">
          <h3>Mental Health &amp; Crisis Support</h3>
          <p>
            Confidential Mental Health Volunteers stay on stand-by; contributed by our peer support team.
          </p>
        </article>
      </div>
      <p>
        Want to request a specific resource or contribute your own?
        <a href="./contact.html">Message the staff</a> and we will get it added.
      </p>
    </section>

    <section class="info-panel">
      <h2 class="text-center">Our Community Servers</h2>
      <p>
        Social Engagement is at the core of community! We have multiple servers that you can
        interact with to find mutual community, support and most importantly, fun!
      </p>
      <ul class="server-list">

        <li>
          <a
            class="server-card"
            href="https://discord.gg/TMH"
            target="_blank"
            rel="noopener noreferrer"
          >
            <strong>TMH Discord Server</strong> &mdash; Our
            community flagship, the central nexus of our community and social engagement.
          </a>
        </li>
        <li>
          <a
            class="server-card"
            href="minecraft://?addExternalServer=TMH%20Minecraft%20Server|tmh-mc.modrinth.gg:25565"
            data-launch="minecraft"
            data-fallback="https://tmh-mc.modrinth.gg"
          >
            <strong>TMH Minecraft Server</strong> &mdash; Survival
            Multiplayer. Whitelisted for
            verified members.
          </a>
        </li>
        <li>
          <a
            class="server-card"
            href="./contact.html"
          >
            <strong>PLACEHOLDER</strong> &mdash; placeholder
          </a>
        </li>
      </ul>
      <p>
        Server access is whitelist only to our verified community members. Contact a
        staff member if you need assistance with access.
      </p>
    </section>

    <section class="card">
      <h2 class="text-center">Placeholder</h2>
      <p>Placeholder</p>
      <div class="mutual-aid-grid">
        <article class="resource-card">
          <h3>Placeholder</h3>
          <p>Placeholder</p>
        </article>
        <article class="resource-card">
          <h3>Placeholder</h3>
          <p>Placeholder</p>
        </article>
        <article class="resource-card">
          <h3>Placeholder</h3>
          <p>Placeholder</p>
        </article>
      </div>
      <p>Placeholder</p>
    </section>

    <script src="./scripts/menu-component.js"></script>
    <script>
      (() => {
        const minecraftLink = document.querySelector('[data-launch="minecraft"]');
        if (!minecraftLink) return;

        minecraftLink.addEventListener('click', event => {
          const deepLink = minecraftLink.getAttribute('href');
          const fallback = minecraftLink.dataset.fallback;
          let fallbackTimer = null;

          const clearFallback = () => {
            if (fallbackTimer) {
              clearTimeout(fallbackTimer);
              fallbackTimer = null;
            }
          };

          const handleVisibilityChange = () => {
            if (document.hidden) {
              clearFallback();
              document.removeEventListener('visibilitychange', handleVisibilityChange);
            }
          };

          event.preventDefault();

          if (fallback) {
            fallbackTimer = setTimeout(() => {
              window.open(fallback, '_blank', 'noopener');
              document.removeEventListener('visibilitychange', handleVisibilityChange);
            }, 1500);
          }

          document.addEventListener('visibilitychange', handleVisibilityChange);
          window.location.href = deepLink;
        });
      })();
    </script>
  </body>
</html>
